<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Primary SEO Meta Tags -->
    <title>Sales Pipeline & Revenue Analytics | TotalCareIT Partner Portal</title>
    <meta name="description" content="Real-time sales reporting and pipeline analytics for MSP, MSSP, and DaaS services. Track deals, revenue metrics, and sales performance with HubSpot integration. Nationwide managed services provider.">
    <meta name="keywords" content="MSP sales reporting, HubSpot CRM analytics, sales pipeline tracking, revenue forecasting, MRR tracking, ARR reporting, deal management, MSP sales dashboard, MSSP sales metrics, DaaS sales analytics">
    <link rel="canonical" href="https://totalcareit.ai/sales-report.html">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://totalcareit.ai/sales-report.html">
    <meta property="og:title" content="Sales Pipeline & Revenue Analytics | TotalCareIT Partner Portal">
    <meta property="og:description" content="Real-time sales reporting and pipeline analytics for MSP, MSSP, and DaaS services with HubSpot integration.">
    <meta property="og:image" content="https://totalcareit.com/wp-content/uploads/2024/11/TotalCareIT-Registered-Logo-Full-Color.webp">

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://totalcareit.ai/sales-report.html">
    <meta name="twitter:title" content="Sales Pipeline & Revenue Analytics | TotalCareIT Partner Portal">
    <meta name="twitter:description" content="Real-time sales reporting and pipeline analytics for MSP, MSSP, and DaaS services with HubSpot integration.">
    <meta name="twitter:image" content="https://totalcareit.com/wp-content/uploads/2024/11/TotalCareIT-Registered-Logo-Full-Color.webp">

    <!-- Structured Data for AI Search Engines -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "TotalCareIT Sales Analytics",
      "description": "Sales pipeline and revenue analytics dashboard with HubSpot CRM integration for MSP, MSSP, and DaaS services",
      "url": "https://totalcareit.ai/sales-report.html",
      "applicationCategory": "BusinessApplication",
      "operatingSystem": "Web",
      "provider": {
        "@type": "Organization",
        "name": "TotalCareIT",
        "url": "https://totalcareit.ai"
      },
      "featureList": [
        "Real-time sales pipeline tracking",
        "MRR and ARR revenue analytics",
        "HubSpot CRM integration",
        "Deal stage management",
        "Revenue forecasting",
        "Sales performance metrics",
        "Client acquisition tracking",
        "Service tier analysis"
      ]
    }
    </script>

    <link rel="stylesheet" href="css/styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">

    <!-- HubSpot Tracking Code -->
    <script type="text/javascript" id="hs-script-loader" async defer src="//js.hs-scripts.com/8752461.js"></script>

    <!-- HubSpot Chat Widget -->
    <script type="text/javascript">
        // Load HubSpot Conversations widget only on authenticated pages
        window.hsConversationsSettings = {
            loadImmediately: true,
            inlineEmbedSelector: '#hubspot-chat-widget'
        };
    </script>

    <!-- MSAL.js for Authentication -->
    <script src="https://alcdn.msauth.net/browser/2.30.0/js/msal-browser.min.js"></script>

    <!-- Backend API Integration -->
    <script src="js/backend-api-client.js"></script>

    <!-- Autotask Integration (Legacy) -->
    <script src="js/autotask-config.js"></script>
    <script src="js/autotask-client.js"></script>
    <script src="js/autotask-sales-adapter.js"></script>
</head>
<body class="dashboard-page">
    <div class="dashboard-container">
        <!-- Partner Portal Navigation (loaded from includes/partner-nav.html) -->
        <div id="partner-nav-placeholder"></div>
        <script src="js/load-nav.js"></script>

        <!-- Main Content -->
        <main class="dashboard-main">
            <div class="dashboard-header">
                <div class="header-content">
                    <h1>Sales Report</h1>
                    <p class="header-subtitle">Track your sales performance and activity metrics</p>
                </div>
            </div>

            <!-- HubSpot Connection Status -->
            <div id="hubspotBanner" class="alert-banner" style="display: none;">
                <div class="alert-content">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"/>
                        <line x1="12" y1="8" x2="12" y2="12"/>
                        <line x1="12" y1="16" x2="12.01" y2="16"/>
                    </svg>
                    <span id="hubspotMessage">Connect to HubSpot to view real-time sales data</span>
                </div>
                <button id="configureHubSpotBtn" class="btn-configure">Configure HubSpot</button>
            </div>

            <!-- Date Range Filter -->
            <div class="filter-section">
                <div class="filter-row">
                    <div class="filter-group">
                        <label for="dateRange">Date Range:</label>
                        <select id="dateRange" class="filter-select">
                            <option value="today">Today</option>
                            <option value="yesterday">Yesterday</option>
                            <option value="thisWeek" selected>This Week</option>
                            <option value="lastWeek">Last Week</option>
                            <option value="thisMonth">This Month</option>
                            <option value="lastMonth">Last Month</option>
                            <option value="thisQuarter">This Quarter</option>
                            <option value="thisYear">This Year</option>
                            <option value="custom">Custom Range</option>
                        </select>
                    </div>
                    <div class="filter-group" id="customDateGroup" style="display: none;">
                        <label for="startDate">From:</label>
                        <input type="date" id="startDate" class="filter-input">
                        <label for="endDate">To:</label>
                        <input type="date" id="endDate" class="filter-input">
                    </div>
                </div>
            </div>

            <!-- Key Metrics -->
            <div class="stats-grid">
                <div class="stat-card stat-primary">
                    <div class="stat-icon">
                        <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/>
                        </svg>
                    </div>
                    <div class="stat-content">
                        <div class="stat-label">Phone Calls Made</div>
                        <div class="stat-value" id="callsMade">--</div>
                        <div class="stat-change positive" id="callsChange">
                            <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                <polyline points="18 15 12 9 6 15"/>
                            </svg>
                            <span>-- vs last period</span>
                        </div>
                    </div>
                </div>

                <div class="stat-card stat-success">
                    <div class="stat-icon">
                        <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
                        </svg>
                    </div>
                    <div class="stat-content">
                        <div class="stat-label">Conversations Had</div>
                        <div class="stat-value" id="conversationsHad">--</div>
                        <div class="stat-change positive" id="conversationsChange">
                            <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                <polyline points="18 15 12 9 6 15"/>
                            </svg>
                            <span>-- vs last period</span>
                        </div>
                    </div>
                </div>

                <div class="stat-card stat-warning">
                    <div class="stat-icon">
                        <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
                            <line x1="16" y1="2" x2="16" y2="6"/>
                            <line x1="8" y1="2" x2="8" y2="6"/>
                            <line x1="3" y1="10" x2="21" y2="10"/>
                        </svg>
                    </div>
                    <div class="stat-content">
                        <div class="stat-label">Appointments Scheduled</div>
                        <div class="stat-value" id="appointmentsScheduled">--</div>
                        <div class="stat-change positive" id="appointmentsChange">
                            <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                <polyline points="18 15 12 9 6 15"/>
                            </svg>
                            <span>-- vs last period</span>
                        </div>
                    </div>
                </div>

                <div class="stat-card stat-info">
                    <div class="stat-icon">
                        <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/>
                        </svg>
                    </div>
                    <div class="stat-content">
                        <div class="stat-label">Conversion Rate</div>
                        <div class="stat-value" id="conversionRate">--%</div>
                        <div class="stat-change positive" id="conversionChange">
                            <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                <polyline points="18 15 12 9 6 15"/>
                            </svg>
                            <span>-- vs last period</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Detailed Metrics -->
            <div class="content-grid">
                <!-- Activity Breakdown -->
                <div class="content-card">
                    <div class="card-header">
                        <h2>Activity Breakdown</h2>
                        <button class="btn-export">Export</button>
                    </div>
                    <div class="activity-breakdown">
                        <div class="breakdown-item">
                            <div class="breakdown-label">
                                <span class="breakdown-dot" style="background: #4f46e5;"></span>
                                Outbound Calls
                            </div>
                            <div class="breakdown-stats">
                                <span class="breakdown-value" id="outboundCalls">--</span>
                                <span class="breakdown-percent" id="outboundPercent">--%</span>
                            </div>
                        </div>
                        <div class="breakdown-item">
                            <div class="breakdown-label">
                                <span class="breakdown-dot" style="background: #06b6d4;"></span>
                                Inbound Calls
                            </div>
                            <div class="breakdown-stats">
                                <span class="breakdown-value" id="inboundCalls">--</span>
                                <span class="breakdown-percent" id="inboundPercent">--%</span>
                            </div>
                        </div>
                        <div class="breakdown-item">
                            <div class="breakdown-label">
                                <span class="breakdown-dot" style="background: #10b981;"></span>
                                Email Conversations
                            </div>
                            <div class="breakdown-stats">
                                <span class="breakdown-value" id="emailConversations">--</span>
                                <span class="breakdown-percent" id="emailPercent">--%</span>
                            </div>
                        </div>
                        <div class="breakdown-item">
                            <div class="breakdown-label">
                                <span class="breakdown-dot" style="background: #8b5cf6;"></span>
                                Meeting Conversations
                            </div>
                            <div class="breakdown-stats">
                                <span class="breakdown-value" id="meetingConversations">--</span>
                                <span class="breakdown-percent" id="meetingPercent">--%</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Upcoming Appointments -->
                <div class="content-card">
                    <div class="card-header">
                        <h2>Upcoming Appointments</h2>
                        <a href="#" class="btn-link">View All</a>
                    </div>
                    <div class="appointments-list" id="appointmentsList">
                        <!-- Will be populated by JavaScript -->
                    </div>
                </div>
            </div>

            <!-- Sales Funnel -->
            <div class="content-card">
                <div class="card-header">
                    <h2>Sales Funnel</h2>
                    <button class="btn-export">Export</button>
                </div>
                <div class="funnel-container">
                    <div class="funnel-stage">
                        <div class="funnel-label">
                            <span>Prospects</span>
                            <span class="funnel-count" id="prospectsCount">--</span>
                        </div>
                        <div class="funnel-bar" style="width: 100%; background: #4f46e5;">
                            <span class="funnel-bar-label">100%</span>
                        </div>
                    </div>
                    <div class="funnel-stage">
                        <div class="funnel-label">
                            <span>Contacted</span>
                            <span class="funnel-count" id="contactedCount">--</span>
                        </div>
                        <div class="funnel-bar" id="contactedBar">
                            <span class="funnel-bar-label" id="contactedPercent">--%</span>
                        </div>
                    </div>
                    <div class="funnel-stage">
                        <div class="funnel-label">
                            <span>Qualified</span>
                            <span class="funnel-count" id="qualifiedCount">--</span>
                        </div>
                        <div class="funnel-bar" id="qualifiedBar">
                            <span class="funnel-bar-label" id="qualifiedPercent">--%</span>
                        </div>
                    </div>
                    <div class="funnel-stage">
                        <div class="funnel-label">
                            <span>Proposal Sent</span>
                            <span class="funnel-count" id="proposalCount">--</span>
                        </div>
                        <div class="funnel-bar" id="proposalBar">
                            <span class="funnel-bar-label" id="proposalPercent">--%</span>
                        </div>
                    </div>
                    <div class="funnel-stage">
                        <div class="funnel-label">
                            <span>Closed Won</span>
                            <span class="funnel-count" id="closedWonCount">--</span>
                        </div>
                        <div class="funnel-bar" id="closedWonBar" style="background: #10b981;">
                            <span class="funnel-bar-label" id="closedWonPercent">--%</span>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Autotask Configuration Modal -->
    <div id="autotaskModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Configure Autotask Integration</h2>
                <button class="modal-close" id="closeModal">&times;</button>
            </div>
            <div class="modal-body">
                <p class="modal-description">
                    Connect your Autotask account to view real-time sales metrics, tickets, and activities.
                    Your credentials are stored securely in your browser and never sent to our servers.
                </p>

                <div class="form-group">
                    <label for="autotaskUsername">API Username (Email)</label>
                    <input type="email" id="autotaskUsername" class="form-input" placeholder="apiuser@totalcareit.com">
                    <small>The email address of your Autotask API user</small>
                </div>

                <div class="form-group">
                    <label for="autotaskSecret">API Secret</label>
                    <input type="password" id="autotaskSecret" class="form-input" placeholder="Enter API secret">
                    <small>Your Autotask API user's password or secret</small>
                </div>

                <div class="form-group">
                    <label for="autotaskIntegrationCode">Integration Code</label>
                    <input type="text" id="autotaskIntegrationCode" class="form-input" placeholder="Enter integration code">
                    <small>The API integration code assigned to your API user</small>
                </div>

                <div class="alert-info">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"/>
                        <line x1="12" y1="16" x2="12" y2="12"/>
                        <line x1="12" y1="8" x2="12.01" y2="8"/>
                    </svg>
                    <div>
                        <strong>How to get your credentials:</strong>
                        <ol>
                            <li>Log in to Autotask as an admin</li>
                            <li>Go to Admin > Resources/Users > API Users</li>
                            <li>Create or select an API user with read-only permissions</li>
                            <li>Note the username, secret, and integration code</li>
                        </ol>
                    </div>
                </div>

                <div id="autotaskError" class="alert-error" style="display: none;"></div>
                <div id="autotaskSuccess" class="alert-success" style="display: none;"></div>
            </div>
            <div class="modal-footer">
                <button id="testConnectionBtn" class="btn-secondary">Test Connection</button>
                <button id="saveAutotaskBtn" class="btn-primary">Save & Connect</button>
            </div>
        </div>
    </div>

    <script src="js/partner-auth.js"></script>
    <script src="js/sales-report.js"></script>
    <script src="js/sales-ai.js"></script>
</body>
</html>
