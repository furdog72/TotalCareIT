<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Finance - TotalCareIT</title>
    <link rel="stylesheet" href="css/styles.css">
    <style>
        .report-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 30px;
        }

        .report-header {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            padding: 40px;
            border-radius: 12px;
            margin-bottom: 30px;
        }

        .report-header h1 {
            margin: 0 0 10px 0;
            font-size: 32px;
        }

        .report-header p {
            margin: 0;
            opacity: 0.9;
        }

        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .metric-card {
            background: white;
            padding: 25px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .metric-card h3 {
            margin: 0 0 10px 0;
            color: #666;
            font-size: 14px;
            font-weight: 600;
            text-transform: uppercase;
        }

        .metric-value {
            font-size: 36px;
            font-weight: 700;
            color: #2c3e50;
            margin: 10px 0;
        }

        .metric-value.currency::before {
            content: '$';
            font-size: 24px;
            vertical-align: super;
            margin-right: 4px;
        }

        .metric-change {
            font-size: 14px;
            font-weight: 600;
        }

        .metric-change.positive {
            color: #10b981;
        }

        .metric-change.negative {
            color: #ef4444;
        }

        .coming-soon {
            text-align: center;
            padding: 60px 20px;
            background: white;
            border-radius: 8px;
            margin-top: 30px;
        }

        .coming-soon svg {
            width: 80px;
            height: 80px;
            margin-bottom: 20px;
            color: #9ca3af;
        }

        .coming-soon h2 {
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .coming-soon p {
            color: #666;
            font-size: 16px;
        }
    </style>
</head>
<body class="dashboard-page">
    <div class="dashboard-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <img src="https://totalcareit.com/wp-content/uploads/2024/11/TotalCareIT-Registered-Logo-White-1024x189.png" alt="TotalCare IT Logo" class="sidebar-logo">
            </div>

            <nav class="sidebar-nav">
                <a href="dashboard.html" class="nav-item">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="3" width="7" height="7"/>
                        <rect x="14" y="3" width="7" height="7"/>
                        <rect x="14" y="14" width="7" height="7"/>
                        <rect x="3" y="14" width="7" height="7"/>
                    </svg>
                    <span>Dashboard</span>
                </a>
                <a href="sales-report.html" class="nav-item">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="12" y1="20" x2="12" y2="10"/>
                        <line x1="18" y1="20" x2="18" y2="4"/>
                        <line x1="6" y1="20" x2="6" y2="16"/>
                    </svg>
                    <span>Sales Report</span>
                </a>
                <a href="linkedin-performance.html" class="nav-item">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"/>
                        <rect x="2" y="9" width="4" height="12"/>
                        <circle cx="4" cy="4" r="2"/>
                    </svg>
                    <span>LinkedIn Performance</span>
                </a>
                <a href="scorecard.html" class="nav-item">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="20" x2="18" y2="10"/>
                        <line x1="12" y1="20" x2="12" y2="4"/>
                        <line x1="6" y1="20" x2="6" y2="14"/>
                    </svg>
                    <span>Scorecard</span>
                </a>
                <a href="quickbooks.html" class="nav-item">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="2" y="7" width="20" height="14" rx="2" ry="2"/>
                        <path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"/>
                    </svg>
                    <span>QuickBooks (CLU)</span>
                </a>
                <a href="prospective-business.html" class="nav-item">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/>
                        <circle cx="9" cy="7" r="4"/>
                        <path d="M22 21v-2a4 4 0 0 0-3-3.87"/>
                        <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
                    </svg>
                    <span>Prospective Business</span>
                </a>
                <a href="finance.html" class="nav-item active">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="12" y1="1" x2="12" y2="23"/>
                        <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/>
                    </svg>
                    <span>Finance</span>
                </a>
                <a href="trumethods-qbr.html" class="nav-item">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                        <polyline points="14 2 14 8 20 8"/>
                        <line x1="16" y1="13" x2="8" y2="13"/>
                        <line x1="16" y1="17" x2="8" y2="17"/>
                        <polyline points="10 9 9 9 8 9"/>
                    </svg>
                    <span>TruMethods QBR</span>
                </a>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="dashboard-main">
            <header class="dashboard-header">
                <div class="header-content">
                    <h1>Finance</h1>
                    <p class="header-subtitle">Financial metrics and reporting for TotalCare AI operations</p>
                </div>
                <div class="user-profile">
                    <div class="user-avatar" id="userAvatar"></div>
                    <div class="user-info">
                        <div class="user-name" id="userName">Loading...</div>
                        <div class="user-email" id="userEmail"></div>
                    </div>
                </div>
                <button id="logoutBtn" class="btn-logout">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/>
                        <polyline points="16 17 21 12 16 7"/>
                        <line x1="21" y1="12" x2="9" y2="12"/>
                    </svg>
                </button>
            </header>

            <div class="dashboard-content">
                <!-- AWS Billing Section -->
                <div class="content-card" style="margin-bottom: 2rem;" data-permission="aws-billing">
                    <div class="card-header">
                        <h2>AWS Billing</h2>
                        <span class="badge-count" id="awsUpdateTime">Updated Weekly</span>
                    </div>
                    <div class="billing-grid" style="grid-template-columns: 1fr;">
                        <!-- Current Month (Updated Weekly) -->
                        <div class="billing-card current-month" style="max-width: 500px;">
                            <div class="billing-header">
                                <h3>October 2025</h3>
                                <span class="real-time-badge">Real-Time</span>
                            </div>
                            <div class="billing-amount" id="currentMonthBilling">
                                <span class="currency">$</span><span class="amount">5.80</span>
                            </div>
                            <div class="billing-details">
                                <div class="billing-detail">
                                    <span class="detail-label">Days Elapsed:</span>
                                    <span class="detail-value" id="daysElapsed">27 of 31 days</span>
                                </div>
                                <div class="billing-detail">
                                    <span class="detail-label">Daily Avg:</span>
                                    <span class="detail-value" id="dailyAvg">$0.21</span>
                                </div>
                                <div class="billing-detail">
                                    <span class="detail-label">Projected Total:</span>
                                    <span class="detail-value" id="projectedTotal">$6.67</span>
                                </div>
                            </div>
                            <div class="billing-services" id="currentServices">
                                <div class="service-item">
                                    <span class="service-name">EC2 (Elastic Compute)</span>
                                    <span class="service-cost">$4.29</span>
                                </div>
                                <div class="service-item">
                                    <span class="service-name">VPC (Virtual Private Cloud)</span>
                                    <span class="service-cost">$0.90</span>
                                </div>
                                <div class="service-item">
                                    <span class="service-name">Route 53</span>
                                    <span class="service-cost">$0.50</span>
                                </div>
                                <div class="service-item">
                                    <span class="service-name">Secrets Manager</span>
                                    <span class="service-cost">$0.10</span>
                                </div>
                                <div class="service-item">
                                    <span class="service-name">S3 (Simple Storage)</span>
                                    <span class="service-cost">$0.01</span>
                                </div>
                            </div>
                            <div class="billing-note" style="margin-top: 1rem; padding-top: 1rem; border-top: 1px solid #e1e4e8; font-size: 0.85rem; color: #586069;">
                                <strong>Note:</strong> This AWS account was created in October 2025. Historical billing data will appear as additional months become available.
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Metrics Overview -->
                <div class="content-card" data-permission="aws-billing">
                    <div class="card-header">
                        <h2>QuickBooks Financial Metrics</h2>
                        <span class="badge-count">Coming Soon</span>
                    </div>
                    <div class="metrics-grid">
                    <div class="metric-card">
                        <h3>Monthly Revenue</h3>
                        <div class="metric-value currency">--</div>
                        <div class="metric-change positive">Coming soon</div>
                    </div>
                    <div class="metric-card">
                        <h3>MRR (Recurring)</h3>
                        <div class="metric-value currency">--</div>
                        <div class="metric-change positive">Coming soon</div>
                    </div>
                    <div class="metric-card">
                        <h3>Expenses (MTD)</h3>
                        <div class="metric-value currency">--</div>
                        <div class="metric-change">Coming soon</div>
                    </div>
                    <div class="metric-card">
                        <h3>Net Profit</h3>
                        <div class="metric-value currency">--</div>
                        <div class="metric-change positive">Coming soon</div>
                    </div>
                    <div class="metric-card">
                        <h3>Accounts Receivable</h3>
                        <div class="metric-value currency">--</div>
                        <div class="metric-change">Coming soon</div>
                    </div>
                    <div class="metric-card">
                        <h3>Cash on Hand</h3>
                        <div class="metric-value currency">--</div>
                        <div class="metric-change positive">Coming soon</div>
                    </div>
                </div>

                    </div>
                </div>

                <!-- Coming Soon Message -->
                <div class="content-card" data-permission="aws-billing">
                    <div class="coming-soon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="12" y1="1" x2="12" y2="23"/>
                            <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/>
                        </svg>
                        <h2>Finance Report</h2>
                        <p>This report will integrate with QuickBooks Online to show:</p>
                        <ul style="list-style: none; padding: 0; margin: 20px 0; color: #666;">
                            <li>✓ Revenue and profit trends</li>
                            <li>✓ Monthly recurring revenue (MRR)</li>
                            <li>✓ Expense breakdown by category</li>
                            <li>✓ Cash flow analysis</li>
                            <li>✓ Accounts receivable aging</li>
                            <li>✓ Budget vs actuals</li>
                            <li>✓ Key financial ratios</li>
                        </ul>
                        <p style="color: #9ca3af; font-size: 14px;">QuickBooks integration active - report coming soon...</p>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script src="https://alcdn.msauth.net/browser/2.30.0/js/msal-browser.min.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/permissions.js"></script>
    <script src="js/billing.js"></script>
</body>
</html>
